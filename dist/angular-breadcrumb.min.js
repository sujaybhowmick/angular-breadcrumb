/*! angular-breadcrumb - v0.1.0 - 2014-02-19
* https://github.com/ncuillery/angular-breadcrumb
* Copyright (c) 2014 Nicolas Cuillery; Licensed MIT */
angular.module("ncy-angular-breadcrumb",["ui.router"]).provider("$breadcrumb",function(){var a={};this.setPrefixState=function(b){a.prefixStateName=b};var b=function(a,b){var c=!1;return angular.forEach(a,function(a){!c&&angular.equals(a,b)&&(c=!0)}),c||a.push(b),c};this.$get=["$state",function(c){return{getStatesChain:function(){var d=[];if(a.prefixStateName){var e=c.get(a.prefixStateName);if(!e)throw'Bad configuration : prefixState "'+a.prefixStateName+'" unknown';b(d,e)}return angular.forEach(c.$current.path,function(a){b(d,a.self)}),d},convertStateToUrl:function(a){return a.replace(".","/")},buildBreadCrumbMarkUp:function(a){var b="",c="<li>",d="</li>",e='<a href="#',f='">',g="</a>";for(var h in a)a.hasOwnProperty(h)&&(b+=c,a[h].abstract?b+=h:(b+=e,b+=this.convertStateToUrl(a[h].name),b+=f,b+=h,b+=g),b+=d);return b}}}]}).directive("ncyBreadcrumb",function(a,b){return function(c,d){c.$watch(function(){return a.current},function(){var a=b.getStatesChain(),c={};angular.forEach(a,function(a){a.data&&a.data.ncyBreadcrumbLabel?c[a.data.ncyBreadcrumbLabel]=a:c[a.name]=a}),d.html(b.buildBreadCrumbMarkUp(c))},!0)}});